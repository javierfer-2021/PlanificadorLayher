<mat-progress-bar mode="indeterminate" *ngIf="LPGen(WSDatos_Validando)"></mat-progress-bar>

<div class="container" #container (window:resize)="onResize($event)" style="overflow-y: auto; height: 100%;">
    <div #pantalla>          
        <!-- Titulo -->
        <div class="row px-1 py-2 titulo">
            <div class="col pt-1 px-1">
                <div class="fs-11 fs-sm-16 fs-md-16 fs-lg-16 fs-xl-16"> {{traducir('frm-configuracion.lblTitulo', 'Parametros de configuración de la aplicación')}} </div>
            </div>
            <div class="col-2 pt-0 px-1" style="text-align: end;">
                <button type="button" class="btn btn-outline-secondary botonAyuda" (click)="mostrarAyuda()">
                    <i class="bi bi-question-circle"></i>
                </button>                    
            </div>                
        </div>  

        <!-- Formulario de configuracion -->    
        <div class="row pt-2">
            <div id="form-container" class="formulario">
                <dx-form id="formConfig" #formConfig [colCount]="3" [formData]="_config" labelMode="static" [readOnly]="!modoEdicion">

                    <dxi-item itemType="group" caption="Planificador" [colCount]="1" [colSpan]="1">
                        <dxi-item dataField="NumItemPlanificador" [label]="{text:'Nº Columnas Planificador'}" [colSpan]="1" [editorOptions]="{disabled:true}">
                            <dxi-validation-rule type="required" message="Debe indicar un valor (0..N) para el campo NUM.COLUMNAS"></dxi-validation-rule>
                        </dxi-item>
                    </dxi-item>

                    <dxi-item itemType="group" caption="Entradas" [colCount]="1" [colSpan]="1">                        
                        <dxi-item dataField="EntradaConfirmarDefecto" [label]="{text:'Confirmar por defecto'}" editorType="dxCheckBox" [editorOptions]="{disabled:false, width:'100%'}"></dxi-item>
                        <dxi-item dataField="EntradaEstadoDefecto" [label]="{text:'Estado por Defecto'}" editorType="dxSelectBox" [editorOptions]="{disabled:false, dataSource:arrayEstadosEntrada, displayExpr:'nombre', valueExpr:'id', searchEnabled: true }">
                            <dxi-validation-rule type="required" message="Debe indicar un valor para el campo ESTADO ENTRADA"></dxi-validation-rule>
                        </dxi-item>
                        <dxi-item dataField="EntradaAlmacenDefecto" [label]="{text:'Almacen por Defecto'}" editorType="dxSelectBox" [editorOptions]="{ disabled:false, dataSource:arrayAlmacenDefecto, displayExpr:'nombre', valueExpr:'id', searchEnabled: true }">
                            <dxi-validation-rule type="required" message="Debe indicar un valor para el campo ALMACEN ENTRADA"></dxi-validation-rule>
                        </dxi-item>
                    </dxi-item>                                    

                    <dxi-item itemType="group" caption="Salidas" [colCount]="1" [colSpan]="1">
                        <dxi-item dataField="SalidaPlanificarDefecto" [label]="{text:'Planificar por Defecto'}" editorType="dxCheckBox" [editorOptions]="{disabled:false, width:'100%'}"></dxi-item>
                        <dxi-item dataField="SalidaEstadoDefecto" [label]="{text:'Estado por Defecto'}" editorType="dxSelectBox" [editorOptions]="{disabled:false, dataSource:arrayEstadosSalida, displayExpr:'nombre', valueExpr:'id', searchEnabled: true }">
                            <dxi-validation-rule type="required" message="Debe indicar un valor para el campo ESTADO ENTRADA"></dxi-validation-rule>
                        </dxi-item>
                        <dxi-item dataField="SalidaAlmacenDefecto" [label]="{text:'Almacen por Defecto'}" editorType="dxSelectBox" [editorOptions]="{ disabled:false, dataSource:arrayAlmacenDefecto, displayExpr:'nombre', valueExpr:'id', searchEnabled: true }">
                            <dxi-validation-rule type="required" message="Debe indicar un valor para el campo ALMACEN ENTRADA"></dxi-validation-rule>
                        </dxi-item>
                    </dxi-item>

                    <dxi-item itemType="group" caption="Gestión de Avisos" [colCount]="1" [colSpan]="1">
                        <dxi-item dataField="EnviarMailAlertas" [label]="{text:'Envio e-mail alertas'}" editorType="dxCheckBox" [editorOptions]="{disabled:false, width:'100%'}"></dxi-item>
                        <dxi-item dataField="DiasPermitidosSinConfirmar" [label]="{text:'Nº Días max. SIN Confirmar'}" [colSpan]="1" [editorOptions]="{disabled:false}">
                            <dxi-validation-rule type="required" message="Debe indicar un valor (0..N) para el campo DIAS SIN CONFIRMAR"></dxi-validation-rule>
                        </dxi-item>
                    </dxi-item>                    

                </dx-form>
            </div>
        </div>
    </div>
</div>

<div #btnFooter>
    <app-cmp-botones-pantallas [botones]="btnAciones"></app-cmp-botones-pantallas>
</div>

<!-- popUp ayuda pantalla -->
<dx-popup  #popUpAyuda (window:resize)="onResize($event)" [dragEnabled]="false"  modal="true" height="70%" width="70%"
    [fullScreen]="false" 
    [(visible)]="popUpVisibleAyuda" [showTitle]="true" [showCloseButton]="true" [closeOnOutsideClick]="false" 
    title="{{traducir('frm-configuracion.str_txtPopupAyuda', 'Ayuda...')}}"
    contentTemplate="contentAyuda">
    <div *dxTemplate="let data of 'contentAyuda'">
        <app-frm-ayuda-pantalla [nombrePantalla]="'frm-configuracion'" (cerrarPopUp)="cerrarAyuda($event)"></app-frm-ayuda-pantalla>
    </div>    
</dx-popup>